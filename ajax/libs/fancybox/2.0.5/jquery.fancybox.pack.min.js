(function(e,t,n){var i=n(e),r=n(t),a=n.fancybox=function(){a.open.apply(this,arguments)},o=!1,s=t.createTouch!==void 0;n.extend(a,{version:"2.0.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoResize:!s,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:.5,fixed:!(n.browser.msie&&6>=n.browser.version||s),scrolling:"auto",wrapCSS:"fancybox-default",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0"'+(n.browser.msie?' allowtransparency="true"':"")+"></iframe>",swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<div title="Close" class="fancybox-item fancybox-close"></div>',next:'<a title="Next" class="fancybox-nav fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:300,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:300,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:300,opacity:.8,css:{cursor:"pointer"},closeClick:!0},title:{type:"float"}}},group:{},opts:{},coming:null,current:null,isOpen:!1,isOpened:!1,wrap:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){a.close(!0),e&&!n.isArray(e)&&(e=e instanceof n?n(e).get():[e]),a.isActive=!0,a.opts=n.extend(!0,{},a.defaults,t),n.isPlainObject(t)&&t.keys!==void 0&&(a.opts.keys=t.keys?n.extend({},a.defaults.keys,t.keys):!1),a.group=e,a._start(a.opts.index||0)},cancel:function(){a.coming&&!1===a.trigger("onCancel")||(a.coming=null,a.hideLoading(),a.ajaxLoad&&a.ajaxLoad.abort(),a.ajaxLoad=null,a.imgPreload&&(a.imgPreload.onload=a.imgPreload.onabort=a.imgPreload.onerror=null))},close:function(e){a.cancel(),a.current&&!1!==a.trigger("beforeClose")&&(a.unbindEvents(),!a.isOpen||e&&!0===e[0]?(n(".fancybox-wrap").stop().trigger("onReset").remove(),a._afterZoomOut()):(a.isOpen=a.isOpened=!1,n(".fancybox-item, .fancybox-nav").remove(),a.wrap.stop(!0).removeClass("fancybox-opened"),a.inner.css("overflow","hidden"),a.transitions[a.current.closeMethod]()))},play:function(e){var t=function(){clearTimeout(a.player.timer)},i=function(){t(),a.current&&a.player.isActive&&(a.player.timer=setTimeout(a.next,a.current.playSpeed))},r=function(){t(),n("body").unbind(".player"),a.player.isActive=!1,a.trigger("onPlayEnd")};a.player.isActive||e&&!1===e[0]?r():a.current&&(a.current.loop||a.current.index<a.group.length-1)&&(a.player.isActive=!0,n("body").bind({"afterShow.player onUpdate.player":i,"onCancel.player beforeClose.player":r,"beforeLoad.player":t}),i(),a.trigger("onPlayStart"))},next:function(){a.current&&a.jumpto(a.current.index+1)},prev:function(){a.current&&a.jumpto(a.current.index-1)},jumpto:function(e){a.current&&(e=parseInt(e,10),a.group.length>1&&a.current.loop&&(e>=a.group.length?e=0:0>e&&(e=a.group.length-1)),a.group[e]!==void 0&&(a.cancel(),a._start(e)))},reposition:function(e){a.isOpen&&a.wrap.css(a._getPosition(e))},update:function(e){a.isOpen&&(o||setTimeout(function(){var t=a.current;o&&(o=!1,t)&&((t.autoResize||e&&"orientationchange"===e.type)&&(t.autoSize&&(a.inner.height("auto"),t.height=a.inner.height()),a._setDimension(),t.canGrow&&a.inner.height("auto")),t.autoCenter&&a.reposition(),a.trigger("onUpdate"))},100),o=!0)},toggle:function(){a.isOpen&&(a.current.fitToView=!a.current.fitToView,a.update())},hideLoading:function(){n("#fancybox-loading").remove()},showLoading:function(){a.hideLoading(),n('<div id="fancybox-loading"><div></div></div>').click(a.cancel).appendTo("body")},getViewport:function(){return{x:i.scrollLeft(),y:i.scrollTop(),w:i.width(),h:i.height()}},unbindEvents:function(){a.wrap&&a.wrap.unbind(".fb"),r.unbind(".fb"),i.unbind(".fb")},bindEvents:function(){var e=a.current,t=e.keys;e&&(i.bind("resize.fb, orientationchange.fb",a.update),t&&r.bind("keydown.fb",function(e){var i;!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&0>n.inArray(e.target.tagName.toLowerCase(),["input","textarea","select","button"])&&(i=e.keyCode,n.inArray(i,t.close)>-1?(a.close(),e.preventDefault()):n.inArray(i,t.next)>-1?(a.next(),e.preventDefault()):n.inArray(i,t.prev)>-1&&(a.prev(),e.preventDefault()))}),n.fn.mousewheel&&e.mouseWheel&&a.group.length>1&&a.wrap.bind("mousewheel.fb",function(e,t){var i=n(e.target).get(0);(0===i.clientHeight||i.scrollHeight===i.clientHeight&&i.scrollWidth===i.clientWidth)&&(e.preventDefault(),a[t>0?"prev":"next"]())}))},trigger:function(e){var t,i=a[n.inArray(e,["onCancel","beforeLoad","afterLoad"])>-1?"coming":"current"];if(i){if(n.isFunction(i[e])&&(t=i[e].apply(i,Array.prototype.slice.call(arguments,1))),!1===t)return!1;i.helpers&&n.each(i.helpers,function(t,r){r&&a.helpers[t]!==void 0&&n.isFunction(a.helpers[t][e])&&a.helpers[t][e](r,i)}),n.event.trigger(e+".fb")}},isImage:function(e){return e&&e.match(/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i)},isSWF:function(e){return e&&e.match(/\.(swf)(.*)?$/i)},_start:function(e){var t,i,r,o={},s=a.group[e]||null;s&&(s.nodeType||s instanceof n)&&(t=!0,n.metadata&&(o=n(s).metadata())),o=n.extend(!0,{},a.opts,{index:e,element:s},n.isPlainObject(s)?s:o),n.each(["href","title","content","type"],function(e,i){o[i]=a.opts[i]||t&&n(s).attr(i)||o[i]||null}),"number"==typeof o.margin&&(o.margin=[o.margin,o.margin,o.margin,o.margin]),o.modal&&n.extend(!0,o,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:!1}}}),a.coming=o,!1===a.trigger("beforeLoad")?a.coming=null:(i=o.type,e=o.href||s,i||(t&&(r=n(s).data("fancybox-type"),!r&&s.className&&(i=(r=s.className.match(/fancybox\.(\w+)/))?r[1]:null)),!i&&"string"===n.type(e)&&(a.isImage(e)?i="image":a.isSWF(e)?i="swf":e.match(/^#/)&&(i="inline")),i||(i=t?"inline":"html"),o.type=i),"inline"===i||"html"===i?(o.content||(o.content="inline"===i?n("string"===n.type(e)?e.replace(/.*(?=#[^\s]+$)/,""):e):s),o.content&&o.content.length||(i=null)):e||(i=null),o.group=a.group,o.isDom=t,o.href=e,"image"===i?a._loadImage():"ajax"===i?a._loadAjax():i?a._afterLoad():a._error("type"))},_error:function(e){a.hideLoading(),n.extend(a.coming,{type:"html",autoSize:!0,minHeight:0,hasError:e,content:a.coming.tpl.error}),a._afterLoad()},_loadImage:function(){a.imgPreload=new Image,a.imgPreload.onload=function(){this.onload=this.onerror=null,a.coming.width=this.width,a.coming.height=this.height,a._afterLoad()},a.imgPreload.onerror=function(){this.onload=this.onerror=null,a._error("image")},a.imgPreload.src=a.coming.href,a.imgPreload.width||a.showLoading()},_loadAjax:function(){a.showLoading(),a.ajaxLoad=n.ajax(n.extend({},a.coming.ajax,{url:a.coming.href,error:function(e,t){"abort"!==t?a._error("ajax",e):a.hideLoading()},success:function(e,t){"success"===t&&(a.coming.content=e,a._afterLoad())}}))},_preloadImages:function(){var e,t=a.group,i=a.current,r=t.length;if(i.preload&&!(2>t.length))for(var o=1;Math.min(i.preload,r-1)>=o;o++)e=t[(i.index+o)%r],(e=n(e).attr("href")||e)&&((new Image).src=e)},_afterLoad:function(){a.hideLoading(),a.coming&&!1!==a.trigger("afterLoad",a.current)?(a.isOpened?(n(".fancybox-item").remove(),a.wrap.stop(!0).removeClass("fancybox-opened"),a.inner.css("overflow","hidden"),a.transitions[a.current.prevMethod]()):(n(".fancybox-wrap").stop().trigger("onReset").remove(),a.trigger("afterClose")),a.unbindEvents(),a.isOpen=!1,a.current=a.coming,a.wrap=n(a.current.tpl.wrap).addClass("fancybox-"+(s?"mobile":"desktop")+" fancybox-tmp "+a.current.wrapCSS).appendTo("body"),a.outer=n(".fancybox-outer",a.wrap).css("padding",a.current.padding+"px"),a.inner=n(".fancybox-inner",a.wrap),a._setContent()):a.coming=!1},_setContent:function(){var e,t,i=a.current,r=i.type;switch(r){case"inline":case"ajax":case"html":e=i.content,e instanceof n&&(e=e.show().detach(),e.parent().hasClass("fancybox-inner")&&e.parents(".fancybox-wrap").trigger("onReset").remove(),n(a.wrap).bind("onReset",function(){e.appendTo("body").hide()})),i.autoSize&&(t=n('<div class="fancybox-tmp '+a.current.wrapCSS+'"></div>').appendTo("body").append(e),i.width=t.width(),i.height=t.height(),t.width(a.current.width),t.height()>i.height&&(t.width(i.width+1),i.width=t.width(),i.height=t.height()),e=t.contents().detach(),t.remove());break;case"image":e=i.tpl.image.replace("{href}",i.href),i.aspectRatio=!0;break;case"swf":e=i.tpl.swf.replace(/\{width\}/g,i.width).replace(/\{height\}/g,i.height).replace(/\{href\}/g,i.href)}if("iframe"===r){if(e=n(i.tpl.iframe.replace("{rnd}",(new Date).getTime())).attr("scrolling",i.scrolling),i.scrolling="auto",i.autoSize)return e.width(i.width),a.showLoading(),e.data("ready",!1).appendTo(a.inner).bind({onCancel:function(){n(this).unbind(),a._afterZoomOut()},load:function(){var e,t=n(this);try{this.contentWindow.document.location&&(e=t.contents().find("body").height()+12,t.height(e))}catch(r){i.autoSize=!1}!1===t.data("ready")?(a.hideLoading(),e&&(a.current.height=e),a._beforeShow(),t.data("ready",!0)):e&&a.update()}}).attr("src",i.href),void 0;e.attr("src",i.href)}else("image"===r||"swf"===r)&&(i.autoSize=!1,i.scrolling="visible");a.inner.append(e),a._beforeShow()},_beforeShow:function(){a.coming=null,a.trigger("beforeShow"),a._setDimension(),a.wrap.hide().removeClass("fancybox-tmp"),a.bindEvents(),a._preloadImages(),a.transitions[a.isOpened?a.current.nextMethod:a.current.openMethod]()},_setDimension:function(){var e,t=a.wrap,i=a.outer,r=a.inner,o=a.current,s=a.getViewport(),l=o.margin,c=2*o.padding,u=o.width,d=o.height,p=o.maxWidth,h=o.maxHeight,m=o.minWidth,g=o.minHeight;if(s.w-=l[1]+l[3],s.h-=l[0]+l[2],(""+u).indexOf("%")>-1&&(u=(s.w-c)*parseFloat(u)/100),(""+d).indexOf("%")>-1&&(d=(s.h-c)*parseFloat(d)/100),l=u/d,u+=c,d+=c,o.fitToView&&(p=Math.min(s.w,p),h=Math.min(s.h,h)),o.aspectRatio?(u>p&&(u=p,d=(u-c)/l+c),d>h&&(d=h,u=(d-c)*l+c),m>u&&(u=m,d=(u-c)/l+c),g>d&&(d=g,u=(d-c)*l+c)):(u=Math.max(m,Math.min(u,p)),d=Math.max(g,Math.min(d,h))),u=Math.round(u),d=Math.round(d),n(t.add(i).add(r)).width("auto").height("auto"),r.width(u-c).height(d-c),t.width(u),e=t.height(),u>p||e>h)for(;(u>p||e>h)&&u>m&&e>g;)d-=10,o.aspectRatio?(u=Math.round((d-c)*l+c),m>u&&(u=m,d=(u-c)/l+c)):u-=10,r.width(u-c).height(d-c),t.width(u),e=t.height();o.dim={width:u,height:e},o.canGrow=o.autoSize&&d>g&&h>d,o.canShrink=!1,o.canExpand=!1,o.width>u-c||o.height>d-c?o.canExpand=!0:(u>s.w||e>s.h)&&u>m&&d>g&&(o.canShrink=!0),t=e-c,a.innerSpace=t-r.height(),a.outerSpace=t-i.height()},_getPosition:function(e){var t=a.current,n=a.getViewport(),i=t.margin,r=a.wrap.width()+i[1]+i[3],o=a.wrap.height()+i[0]+i[2],s={position:"absolute",top:i[0]+n.y,left:i[3]+n.x};return t.fixed&&(!e||!1===e[0])&&n.h>=o&&n.w>=r&&(s={position:"fixed",top:i[0],left:i[3]}),s.top=Math.ceil(Math.max(s.top,s.top+(n.h-o)*t.topRatio))+"px",s.left=Math.ceil(Math.max(s.left,s.left+.5*(n.w-r)))+"px",s},_afterZoomIn:function(){var e=a.current,t=e.scrolling;a.isOpen=a.isOpened=!0,a.wrap.addClass("fancybox-opened").css("overflow","visible"),a.update(),a.inner.css("overflow","yes"===t?"scroll":"no"===t?"hidden":t),(e.closeClick||e.nextClick)&&a.inner.css("cursor","pointer").bind("click.fb",e.nextClick?a.next:a.close),e.closeBtn&&n(e.tpl.closeBtn).appendTo(a.outer).bind("click.fb",a.close),e.arrows&&a.group.length>1&&((e.loop||e.index>0)&&n(e.tpl.prev).appendTo(a.inner).bind("click.fb",a.prev),(e.loop||e.index<a.group.length-1)&&n(e.tpl.next).appendTo(a.inner).bind("click.fb",a.next)),a.trigger("afterShow"),a.opts.autoPlay&&!a.player.isActive&&(a.opts.autoPlay=!1,a.play())},_afterZoomOut:function(){a.trigger("afterClose"),a.wrap.trigger("onReset").remove(),n.extend(a,{group:{},opts:{},current:null,isActive:!1,isOpened:!1,isOpen:!1,wrap:null,outer:null,inner:null})}}),a.transitions={getOrigPosition:function(){var e=a.current,t=e.element,i=e.padding,r=n(e.orig),o={},s=50,l=50;return!r.length&&e.isDom&&n(t).is(":visible")&&(r=n(t).find("img:first"),r.length||(r=n(t))),r.length?(o=r.offset(),r.is("img")&&(s=r.outerWidth(),l=r.outerHeight())):(e=a.getViewport(),o.top=e.y+.5*(e.h-l),o.left=e.x+.5*(e.w-s)),o={top:Math.ceil(o.top-i)+"px",left:Math.ceil(o.left-i)+"px",width:Math.ceil(s+2*i)+"px",height:Math.ceil(l+2*i)+"px"}},step:function(e,t){var n,i,r;("width"===t.prop||"height"===t.prop)&&(i=r=Math.ceil(e-2*a.current.padding),"height"===t.prop&&(n=(e-t.start)/(t.end-t.start),t.start>t.end&&(n=1-n),i-=a.innerSpace*n,r-=a.outerSpace*n),a.inner[t.prop](i),a.outer[t.prop](r))},zoomIn:function(){var e,t,i=a.wrap,r=a.current;e=r.dim,"elastic"===r.openEffect?(t=n.extend({},e,a._getPosition(!0)),delete t.position,e=this.getOrigPosition(),r.openOpacity&&(e.opacity=0,t.opacity=1),a.outer.add(a.inner).width("auto").height("auto"),i.css(e).show(),i.animate(t,{duration:r.openSpeed,easing:r.openEasing,step:this.step,complete:a._afterZoomIn})):(i.css(n.extend({},e,a._getPosition())),"fade"===r.openEffect?i.fadeIn(r.openSpeed,a._afterZoomIn):(i.show(),a._afterZoomIn()))},zoomOut:function(){var e,t=a.wrap,n=a.current;"elastic"===n.closeEffect?("fixed"===t.css("position")&&t.css(a._getPosition(!0)),e=this.getOrigPosition(),n.closeOpacity&&(e.opacity=0),t.animate(e,{duration:n.closeSpeed,easing:n.closeEasing,step:this.step,complete:a._afterZoomOut})):t.fadeOut("fade"===n.closeEffect?n.closeSpeed:0,a._afterZoomOut)},changeIn:function(){var e,t=a.wrap,n=a.current;"elastic"===n.nextEffect?(e=a._getPosition(!0),e.opacity=0,e.top=parseInt(e.top,10)-200+"px",t.css(e).show().animate({opacity:1,top:"+=200px"},{duration:n.nextSpeed,easing:n.nextEasing,complete:a._afterZoomIn})):(t.css(a._getPosition()),"fade"===n.nextEffect?t.hide().fadeIn(n.nextSpeed,a._afterZoomIn):(t.show(),a._afterZoomIn()))},changeOut:function(){var e=a.wrap,t=a.current,i=function(){n(this).trigger("onReset").remove()};e.removeClass("fancybox-opened"),"elastic"===t.prevEffect?e.animate({opacity:0,top:"+=200px"},{duration:t.prevSpeed,easing:t.prevEasing,complete:i}):e.fadeOut("fade"===t.prevEffect?t.prevSpeed:0,i)}},a.helpers.overlay={overlay:null,update:function(){var e,a;this.overlay.width(0).height(0),n.browser.msie?(e=Math.max(t.documentElement.scrollWidth,t.body.scrollWidth),a=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),e=a>e?i.width():e):e=r.width(),this.overlay.width(e).height(r.height())},beforeShow:function(e){this.overlay||(e=n.extend(!0,{speedIn:"fast",closeClick:!0,opacity:1,css:{background:"black"}},e),this.overlay=n('<div id="fancybox-overlay"></div>').css(e.css).appendTo("body"),this.update(),e.closeClick&&this.overlay.bind("click.fb",a.close),i.bind("resize.fb",n.proxy(this.update,this)),this.overlay.fadeTo(e.speedIn,e.opacity))},onUpdate:function(){this.update()},afterClose:function(e){this.overlay&&this.overlay.fadeOut(e.speedOut||0,function(){n(this).remove()}),this.overlay=null}},a.helpers.title={beforeShow:function(e){var t;(t=a.current.title)&&(t=n('<div class="fancybox-title fancybox-title-'+e.type+'-wrap">'+t+"</div>").appendTo("body"),"float"===e.type&&(t.width(t.width()),t.wrapInner('<span class="child"></span>'),a.current.margin[2]+=Math.abs(parseInt(t.css("margin-bottom"),10))),t.appendTo("over"===e.type?a.inner:"outside"===e.type?a.wrap:a.outer))}},n.fn.fancybox=function(e){var t,i=n(this),o=this.selector||"",s=function(r){var s=this,l="rel",c=s[l],u=t;!r.ctrlKey&&!r.altKey&&!r.shiftKey&&!r.metaKey&&(r.preventDefault(),c||(l="data-fancybox-group",c=n(s).attr("data-fancybox-group")),c&&""!==c&&"nofollow"!==c&&(s=o.length?n(o):i,s=s.filter("["+l+'="'+c+'"]'),u=s.index(this)),e.index=u,a.open(s,e))},e=e||{};return t=e.index||0,o?r.undelegate(o,"click.fb-start").delegate(o,"click.fb-start",s):i.unbind("click.fb-start").bind("click.fb-start",s),this}})(window,document,jQuery);