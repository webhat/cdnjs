(function(e){e.fn.flipCounter=function(t){function n(e){var t=y.data("flipCounter"),n=t[e];return n!==void 0?n:!1}function i(e,t){var n=y.data("flipCounter");n[e]=t,y.data("flipCounter",n)}function r(){1>y.children('[name="'+n("counterFieldName")+'"]').length&&y.append('<input type="hidden" name="'+n("counterFieldName")+'" value="'+n("number")+'" />');for(var e=l(),t=d().length;t!=e;)t>e?y.prepend('<span class="'+n("digitClass")+'" style="'+b+v["0"]+'">0</span>'):e>t&&y.children("."+n("digitClass")+":nth-child(1)").remove(),e=l()}function o(){r();var t=d(),n=s(),i=0;e.each(n,function(){digit=(""+t).charAt(i),e(this).attr("style",b+v[digit]),e(this).text(""+digit.replace(" ","&nbsp;")),i++}),u()}function a(){b="height:"+n("digitHeight")+"px;width:"+n("digitWidth")+"px;background-image:url('"+n("imagePath")+"');background-repeat:no-repeat;text-indent: -999em;display:inline-block;",v={1:"background-position: "+0*n("digitWidth")+"px 0px;",2:"background-position: -"+1*n("digitWidth")+"px 0px;",3:"background-position: -"+2*n("digitWidth")+"px 0px;",4:"background-position: -"+3*n("digitWidth")+"px 0px;",5:"background-position: -"+4*n("digitWidth")+"px 0px;",6:"background-position: -"+5*n("digitWidth")+"px 0px;",7:"background-position: -"+6*n("digitWidth")+"px 0px;",8:"background-position: -"+7*n("digitWidth")+"px 0px;",9:"background-position: -"+8*n("digitWidth")+"px 0px;",0:"background-position: -"+9*n("digitWidth")+"px 0px;",".":"background-position: -"+10*n("digitWidth")+"px 0px;","-":"background-position: -"+11*n("digitWidth")+"px 0px;",",":"background-position: -"+12*n("digitWidth")+"px 0px;"," ":"background-position: -"+13*n("digitWidth")+"px 0px;"}}function s(){return y.children("."+n("digitClass"))}function l(){return s().length}function c(){var e=parseFloat(y.children('[name="'+n("counterFieldName")+'"]').val());return 0==(e==e)?!1:e}function u(){y.children('[name="'+n("counterFieldName")+'"]').val(n("number"))}function d(){var t=n("number");if("number"!=typeof t)return e.error("Attempting to render non-numeric value."),"0";var i="";if(n("formatNumberOptions"))e.formatNumber?i=e.formatNumber(t,n("formatNumberOptions")):e.error("The numberformatter jQuery plugin is not loaded. This plugin is required to use the formatNumberOptions setting.");else if(t>=0){for(var r=n("numIntegralDigits"),o=r-(""+t.toFixed()).length,a=0;o>a;a++)i+="0";i+=t.toFixed(n("numFractionalDigits"))}else i="-"+Math.abs(t.toFixed(n("numFractionalDigits")));return i}function p(e){if(e===void 0&&0==n("animating"))return!1;e!==void 0&&("function"==typeof e.easing&&i("easing",e.easing),"function"==typeof e.onAnimationStarted&&i("onAnimationStarted",e.onAnimationStarted),"function"==typeof e.onAnimationStopped&&i("onAnimationStopped",e.onAnimationStopped),"function"==typeof e.onAnimationPaused&&i("onAnimationPaused",e.onAnimationPaused),"number"==typeof e.duration&&i("duration",e.duration)),n("paused")===!0?(i("paused",!1),i("animating",!0),i("interval",setInterval(h,1))):(i("start_number",n("number")),i("end_number",e.number),i("time",0),i("duration",n("duration")/10),i("animating",!0),i("interval",setInterval(h,1)));var t=n("onAnimationStarted");"function"==typeof t&&t.call(y,y)}function h(){var e=n("time"),t=n("start_number"),r=n("end_number")-t,a=n("duration"),s=n("easing"),l=s.apply(y,[!1,e,t,r,a]);i("number",l),o(),e>=a&&m(),i("time",e+1)}function m(){if(!0!==n("animating"))return!1;clearInterval(n("interval")),i("number",n("end_number")),i("start_number",null),i("end_number",null),i("timer",0),i("animating",!1);var e=n("onAnimationStopped");"function"==typeof e&&e.call(y,y)}function g(){if(!0!==n("animating"))return!1;i("paused",!0),clearInterval(n("interval"));var e=n("onAnimationPaused");"function"==typeof e&&e.call(y,y)}function f(e,t,n,i,r){return t/r*i+n}var b=!1,v=!1,y=!1,_={number:0,numIntegralDigits:1,numFractionalDigits:0,digitClass:"counter-digit",counterFieldName:"counter-value",digitHeight:40,digitWidth:30,imagePath:"img/flipCounter-medium.png",easing:f,duration:1e4,onAnimationStarted:!1,onAnimationStopped:!1,onAnimationPaused:!1,formatNumberOptions:!1},k={init:function(t){return this.each(function(){y=e(this);var n=e.extend(_,t),r=y.data("flipCounter");t=e.extend(r,n),y.data("flipCounter",t),(t.number===!1||0==t.number)&&(t.number=c()!==!1?c():0,i("number",t.number)),i("animating",!1),y.bind("startAnimation",function(e,t){p(t)}),y.bind("pauseAnimation",function(){g()}),y.bind("stopAnimation",function(){m()}),a(),o()})},renderCounter:function(t){return this.each(function(){y=e(this),i("number",t),o()})},setNumber:function(t){return this.each(function(){y=e(this),i("number",t),o()})},getNumber:function(){var t=!1;return this.each(function(){y=e(this),t=n("number")}),t},startAnimation:function(t){return this.each(function(){y=e(this),y.trigger("startAnimation",t)})},stopAnimation:function(){return this.each(function(){y=e(this),y.trigger("stopAnimation")})},pauseAnimation:function(){return this.each(function(){y=e(this),y.trigger("pauseAnimation")})}};return k[t]?k[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.flipCounter"),void 0):k.init.apply(this,arguments)}})(jQuery);