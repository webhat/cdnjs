(function(e,t,n){"use strict";var i={version:"2.0.3",tipLocation:"bottom",nubPosition:"auto",scrollSpeed:300,timer:0,startTimerOnClick:!0,startOffset:0,nextButton:!0,tipAnimation:"fade",pauseAfter:[],tipAnimationFadeSpeed:300,cookieMonster:!1,cookieName:"joyride",cookieDomain:!1,tipContainer:"body",postRideCallback:e.noop,postStepCallback:e.noop,template:{link:'<a href="#close" class="joyride-close-tip">X</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>'}},r=r||!1,o={},a={init:function(n){return this.each(function(){e.isEmptyObject(o)?(o=e.extend(!0,i,n),o.document=t.document,o.$document=e(o.document),o.$window=e(t),o.$content_el=e(this),o.body_offset=e(o.tipContainer).position(),o.$tip_content=e("> li",o.$content_el),o.paused=!1,o.attempts=0,o.tipLocationPatterns={top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},a.jquery_check(),e.isFunction(e.cookie)||(o.cookieMonster=!1),o.cookieMonster&&e.cookie(o.cookieName)||(o.$tip_content.each(function(t){a.create({$li:e(this),index:t})}),!o.startTimerOnClick&&o.timer>0?(a.show("init"),a.startTimer()):a.show("init")),o.$document.on("click.joyride",".joyride-next-tip, .joyride-modal-bg",function(e){e.preventDefault(),1>o.$li.next().length?a.end():o.timer>0?(clearTimeout(o.automate),a.hide(),a.show(),a.startTimer()):(a.hide(),a.show())}),o.$document.on("click.joyride",".joyride-close-tip",function(e){e.preventDefault(),a.end()}),o.$window.bind("resize.joyride",function(){a.is_phone()?a.pos_phone():a.pos_default()})):a.restart()})},resume:function(){a.set_li(),a.show()},tip_template:function(t){var n,i;return t.tip_class=t.tip_class||"",n=e(o.template.tip).addClass(t.tip_class),i=e.trim(e(t.li).html())+a.button_text(t.button_text)+o.template.link+a.timer_instance(t.index),n.append(e(o.template.wrapper)),n.first().attr("data-index",t.index),e(".joyride-content-wrapper",n).append(i),n[0]},timer_instance:function(t){var n;return n=0===t&&o.startTimerOnClick&&o.timer>0||0===o.timer?"":a.outerHTML(e(o.template.timer)[0])},button_text:function(t){return o.nextButton?(t=e.trim(t)||"Next",t=a.outerHTML(e(o.template.button).append(t)[0])):t="",t},create:function(t){var n=t.$li.attr("data-button")||t.$li.attr("data-text"),i=t.$li.attr("class"),r=e(a.tip_template({tip_class:i,index:t.index,button_text:n,li:t.$li}));e(o.tipContainer).append(r)},show:function(t){var i,r,s={},l=[],c=0,u=null;if(o.$li===n||-1===e.inArray(o.$li.index(),o.pauseAfter))if(o.paused?o.paused=!1:a.set_li(t),o.attempts=0,o.$li.length&&o.$target.length>0){for(l=(o.$li.data("options")||":").split(";"),c=l.length,i=c-1;i>=0;i--)r=l[i].split(":"),2===r.length&&(s[e.trim(r[0])]=e.trim(r[1]));o.tipSettings=e.extend({},o,s),o.tipSettings.tipLocationPattern=o.tipLocationPatterns[o.tipSettings.tipLocation],/body/i.test(o.$target.selector)||a.scroll_to(),a.is_phone()?a.pos_phone(!0):a.pos_default(!0),u=e(".joyride-timer-indicator",o.$next_tip),/pop/i.test(o.tipAnimation)?(u.outerWidth(0),o.timer>0?(o.$next_tip.show(),u.animate({width:e(".joyride-timer-indicator-wrap",o.$next_tip).outerWidth()},o.timer)):o.$next_tip.show()):/fade/i.test(o.tipAnimation)&&(u.outerWidth(0),o.timer>0?(o.$next_tip.fadeIn(o.tipAnimationFadeSpeed),o.$next_tip.show(),u.animate({width:e(".joyride-timer-indicator-wrap",o.$next_tip).outerWidth()},o.timer)):o.$next_tip.fadeIn(o.tipAnimationFadeSpeed)),o.$current_tip=o.$next_tip}else o.$li&&1>o.$target.length?a.show():a.end();else o.paused=!0},is_phone:function(){return r?r.mq("only screen and (max-width: 767px)"):767>o.$window.width()?!0:!1},hide:function(){o.postStepCallback(o.$li.index(),o.$current_tip),e(".joyride-modal-bg").hide(),o.$current_tip.hide()},set_li:function(e){e?(o.$li=o.$tip_content.eq(o.startOffset),a.set_next_tip(),o.$current_tip=o.$next_tip):(o.$li=o.$li.next(),a.set_next_tip()),a.set_target()},set_next_tip:function(){o.$next_tip=e(".joyride-tip-guide[data-index="+o.$li.index()+"]")},set_target:function(){var t=o.$li.attr("data-class"),n=o.$li.attr("data-id"),i=function(){return n?e(o.document.getElementById(n)):t?e("."+t).first():e("body")};o.$target=i()},scroll_to:function(){var t,n;t=o.$window.height()/2,n=Math.ceil(o.$target.offset().top-t+o.$next_tip.outerHeight()),e("html, body").stop().animate({scrollTop:n},o.scrollSpeed)},paused:function(){return-1===e.inArray(o.$li.index()+1,o.pauseAfter)?!0:!1},destroy:function(){o.$document.off(".joyride"),e(t).off(".joyride"),e(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride"),e(".joyride-tip-guide, .joyride-modal-bg").remove(),clearTimeout(o.automate),o={}},restart:function(){a.hide(),o.$li=n,a.show("init")},pos_default:function(t){var n=(Math.ceil(o.$window.height()/2),o.$next_tip.offset(),e(".joyride-nub",o.$next_tip)),i=Math.ceil(n.outerHeight()/2),r=t||!1;r&&(o.$next_tip.css("visibility","hidden"),o.$next_tip.show()),/body/i.test(o.$target.selector)?o.$li.length&&a.pos_modal(n):(a.bottom()?(o.$next_tip.css({top:o.$target.offset().top+i+o.$target.outerHeight(),left:o.$target.offset().left}),a.nub_position(n,o.tipSettings.nubPosition,"top")):a.top()?(o.$next_tip.css({top:o.$target.offset().top-o.$next_tip.outerHeight()-i,left:o.$target.offset().left}),a.nub_position(n,o.tipSettings.nubPosition,"bottom")):a.right()?(o.$next_tip.css({top:o.$target.offset().top,left:o.$target.outerWidth()+o.$target.offset().left}),a.nub_position(n,o.tipSettings.nubPosition,"left")):a.left()&&(o.$next_tip.css({top:o.$target.offset().top,left:o.$target.offset().left-o.$next_tip.outerWidth()-i}),a.nub_position(n,o.tipSettings.nubPosition,"right")),!a.visible(a.corners(o.$next_tip))&&o.attempts<o.tipSettings.tipLocationPattern.length&&(n.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),o.tipSettings.tipLocation=o.tipSettings.tipLocationPattern[o.attempts],o.attempts++,a.pos_default(!0))),r&&(o.$next_tip.hide(),o.$next_tip.css("visibility","visible"))},pos_phone:function(t){var n=o.$next_tip.outerHeight(),i=(o.$next_tip.offset(),o.$target.outerHeight()),r=e(".joyride-nub",o.$next_tip),s=Math.ceil(r.outerHeight()/2),l=t||!1;r.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),l&&(o.$next_tip.css("visibility","hidden"),o.$next_tip.show()),/body/i.test(o.$target.selector)?o.$li.length&&a.pos_modal(r):a.top()?(o.$next_tip.offset({top:o.$target.offset().top-n-s}),r.addClass("bottom")):(o.$next_tip.offset({top:o.$target.offset().top+i+s}),r.addClass("top")),l&&(o.$next_tip.hide(),o.$next_tip.css("visibility","visible"))},pos_modal:function(t){a.center(),t.hide(),1>e(".joyride-modal-bg").length&&e("body").append('<div class="joyride-modal-bg">').show(),/pop/i.test(o.tipAnimation)?e(".joyride-modal-bg").show():e(".joyride-modal-bg").fadeIn(o.tipAnimationFadeSpeed)},center:function(){var e=o.$window;return o.$next_tip.css({top:(e.height()-o.$next_tip.outerHeight())/2+e.scrollTop(),left:(e.width()-o.$next_tip.outerWidth())/2+e.scrollLeft()}),!0},bottom:function(){return/bottom/i.test(o.tipSettings.tipLocation)},top:function(){return/top/i.test(o.tipSettings.tipLocation)},right:function(){return/right/i.test(o.tipSettings.tipLocation)},left:function(){return/left/i.test(o.tipSettings.tipLocation)},corners:function(e){var t=o.$window,n=t.width()+t.scrollLeft(),i=t.width()+t.scrollTop();return[e.offset().top<=t.scrollTop(),e.offset().left+e.outerWidth()>=n,e.offset().top+e.outerHeight()>=i,t.scrollLeft()>=e.offset().left]},visible:function(e){for(var t=e.length;t--;)if(e[t])return!1;return!0},nub_position:function(e,t,n){"auto"===t?e.addClass(n):e.addClass(t)},startTimer:function(){o.$li.length?o.automate=setTimeout(function(){a.hide(),a.show(),a.startTimer()},o.timer):clearTimeout(o.automate)},end:function(){o.cookieMonster&&e.cookie(o.cookieName,"ridden",{expires:365,domain:o.cookieDomain}),o.timer>0&&clearTimeout(o.automate),e(".joyride-modal-bg").hide(),o.$current_tip.hide(),o.postStepCallback(o.$li.index(),o.$current_tip),o.postRideCallback(o.$li.index(),o.$current_tip)},jquery_check:function(){return e.isFunction(e.fn.on)?!0:(e.fn.on=function(e,t,n){return this.delegate(t,e,n)},e.fn.off=function(e,t,n){return this.undelegate(t,e,n)},!1)},outerHTML:function(e){return e.outerHTML||(new XMLSerializer).serializeToString(e)},version:function(){return o.version}};e.fn.joyride=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.joyride"),n):a.init.apply(this,arguments)}})(jQuery,this);