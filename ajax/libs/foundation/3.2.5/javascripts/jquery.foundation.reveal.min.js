(function(e){"use strict";var t=!1;e(document).on("click","a[data-reveal-id]",function(t){t.preventDefault();var n=e(this).attr("data-reveal-id");e("#"+n).reveal(e(this).data())}),e.fn.reveal=function(n){var i=e(document),r={animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:!0,dismissModalClass:"close-reveal-modal",open:e.noop,opened:e.noop,close:e.noop,closed:e.noop};return n=e.extend({},r,n),this.not(".reveal-modal.open").each(function(){function r(){f=!1}function o(){f=!0}function a(){var n=e(".reveal-modal.open");1===n.length&&(t=!0,n.trigger("reveal:close"))}function s(){f||(o(),a(),h.addClass("open"),"fadeAndPop"===n.animation&&(v.open.top=i.scrollTop()-g,v.open.opacity=0,h.css(v.open),b.fadeIn(n.animationSpeed/2),h.delay(n.animationSpeed/2).animate({top:i.scrollTop()+m+"px",opacity:1},n.animationSpeed,function(){h.trigger("reveal:opened")})),"fade"===n.animation&&(v.open.top=i.scrollTop()+m,v.open.opacity=0,h.css(v.open),b.fadeIn(n.animationSpeed/2),h.delay(n.animationSpeed/2).animate({opacity:1},n.animationSpeed,function(){h.trigger("reveal:opened")})),"none"===n.animation&&(v.open.top=i.scrollTop()+m,v.open.opacity=1,h.css(v.open),b.css({display:"block"}),h.trigger("reveal:opened")))}function l(){var e=h.find(".flex-video"),t=e.find("iframe");t.length>0&&(t.attr("src",t.data("src")),e.fadeIn(100))}function c(){f||(o(),h.removeClass("open"),"fadeAndPop"===n.animation&&(h.animate({top:i.scrollTop()-g+"px",opacity:0},n.animationSpeed/2,function(){h.css(v.close)}),t?h.trigger("reveal:closed"):b.delay(n.animationSpeed).fadeOut(n.animationSpeed,function(){h.trigger("reveal:closed")})),"fade"===n.animation&&(h.animate({opacity:0},n.animationSpeed,function(){h.css(v.close)}),t?h.trigger("reveal:closed"):b.delay(n.animationSpeed).fadeOut(n.animationSpeed,function(){h.trigger("reveal:closed")})),"none"===n.animation&&(h.css(v.close),t||b.css({display:"none"}),h.trigger("reveal:closed")),t=!1)}function u(){h.unbind(".reveal"),b.unbind(".reveal"),p.unbind(".reveal"),e("body").unbind(".reveal")}function d(){var e=h.find(".flex-video"),t=e.find("iframe");t.length>0&&(t.data("src",t.attr("src")),t.attr("src",""),e.fadeOut(100))}var p,h=e(this),m=parseInt(h.css("top"),10),g=h.height()+m,f=!1,b=e(".reveal-modal-bg"),v={open:{top:0,opacity:0,visibility:"visible",display:"block"},close:{top:m,opacity:1,visibility:"hidden",display:"none"}};0===b.length&&(b=e("<div />",{"class":"reveal-modal-bg"}).insertAfter(h),b.fadeTo("fast",.8)),h.bind("reveal:open.reveal",s),h.bind("reveal:open.reveal",l),h.bind("reveal:close.reveal",c),h.bind("reveal:closed.reveal",d),h.bind("reveal:opened.reveal reveal:closed.reveal",r),h.bind("reveal:closed.reveal",u),h.bind("reveal:open.reveal",n.open),h.bind("reveal:opened.reveal",n.opened),h.bind("reveal:close.reveal",n.close),h.bind("reveal:closed.reveal",n.closed),h.trigger("reveal:open"),p=e("."+n.dismissModalClass).bind("click.reveal",function(){h.trigger("reveal:close")}),n.closeOnBackgroundClick&&(b.css({cursor:"pointer"}),b.bind("click.reveal",function(){h.trigger("reveal:close")})),e("body").bind("keyup.reveal",function(e){27===e.which&&h.trigger("reveal:close")})})}})(jQuery);