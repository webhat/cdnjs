(function(e,t){"use strict";var n={index:0,initialized:!1},i={init:function(r){return this.each(function(){n=e.extend(n,r),n.$w=e(t),n.$topbar=e("nav.top-bar"),n.$section=n.$topbar.find("section"),n.$titlebar=n.$topbar.children("ul:first");var o=e("<div class='top-bar-js-breakpoint'/>").appendTo("body");n.breakPoint=o.width(),o.remove(),n.initialized||(i.assemble(),n.initialized=!0),n.height||i.largestUL(),n.$topbar.parent().hasClass("fixed")&&e("body").css("padding-top",n.$topbar.outerHeight()),e(".top-bar .toggle-topbar").off("click.fndtn").on("click.fndtn",function(e){e.preventDefault(),i.breakpoint()&&(n.$topbar.toggleClass("expanded"),n.$topbar.css("min-height","")),n.$topbar.hasClass("expanded")||(n.$section.css({left:"0%"}),n.$section.find(">.name").css({left:"100%"}),n.$section.find("li.moved").removeClass("moved"),n.index=0)}),e(".top-bar .has-dropdown>a").off("click.fndtn").on("click.fndtn",function(t){if((Modernizr.touch||i.breakpoint())&&t.preventDefault(),i.breakpoint()){var r=e(this),o=r.closest("li");n.index+=1,o.addClass("moved"),n.$section.css({left:-(100*n.index)+"%"}),n.$section.find(">.name").css({left:100*n.index+"%"}),r.siblings("ul").height(n.height+n.$titlebar.outerHeight(!0)),n.$topbar.css("min-height",n.height+2*n.$titlebar.outerHeight(!0))}}),e(t).on("resize.fndtn.topbar",function(){i.breakpoint()||n.$topbar.css("min-height","")}),e(".top-bar .has-dropdown .back").off("click.fndtn").on("click.fndtn",function(t){t.preventDefault();var i=e(this),r=i.closest("li.moved");r.parent(),n.index-=1,n.$section.css({left:-(100*n.index)+"%"}),n.$section.find(">.name").css({left:100*n.index+"%"}),0===n.index&&n.$topbar.css("min-height",0),setTimeout(function(){r.removeClass("moved")},300)})})},breakpoint:function(){return n.$w.width()<n.breakPoint},assemble:function(){n.$section.detach(),n.$section.find(".has-dropdown>a").each(function(){var t=e(this),n=t.siblings(".dropdown"),i=e('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');i.find("h5>a").html(t.html()),n.prepend(i)}),n.$section.appendTo(n.$topbar)},largestUL:function(){var t=n.$topbar.find("section ul ul"),i=t.first(),r=0;t.each(function(){e(this).children("li").length>i.children("li").length&&(i=e(this))}),i.children("li").each(function(){r+=e(this).outerHeight(!0)}),n.height=r}};if(e.fn.foundationTopBar=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.foundationTopBar"),undefined):i.init.apply(this,arguments)},e(".sticky").length>0){var r=e(".sticky").length?e(".sticky").offset().top:0,o=e(t);o.scroll(function(){o.scrollTop()>=r?e(".sticky").addClass("fixed"):r>o.scrollTop()&&e(".sticky").removeClass("fixed")})}})(jQuery,this);