(function(e,t){"use strict";Foundation.libs.section={name:"section",version:"4.0.5",settings:{deep_linking:!1,one_up:!0,callback:function(){}},init:function(t,n,i){return this.scope=t||this.scope,Foundation.inherit(this,"throttle data_options"),"object"==typeof n&&e.extend(!0,this.settings,n),"string"!=typeof n?(this.set_active_from_hash(),this.settings.init||this.events(),this.settings.init):this[n].call(this,i)},events:function(){var n=this;e(this.scope).on("click.fndtn.section","[data-section] .title",function(t){e.extend(!0,n.settings,n.data_options(e(this).closest("[data-section]"))),n.toggle_active.call(this,t,n)}),e(t).on("resize.fndtn.section",n.throttle(function(){n.resize.call(this)},30)).trigger("resize"),e("[data-section] .content").on("click.fndtn.section",function(e){e.stopPropagation()}),e("*, html, body").on("click.fndtn.section",function(t){1>e(t.target).closest(".title").length&&e("[data-section].vertical-nav, [data-section].horizontal-nav").find("section, .section").removeClass("active").attr("style","")}),this.settings.init=!0},toggle_active:function(t,n){var i=e(this),r=i.closest("section, .section"),o=r.find(".content"),a=r.closest("[data-section]"),n=Foundation.libs.section;!n.settings.deep_linking&&o.length>0&&t.preventDefault(),r.hasClass("active")?(n.small(a)||n.is_vertical(a)||n.is_horizontal(a)||n.is_accordion(a))&&r.removeClass("active").attr("style",""):((n.small(a)||n.settings.one_up)&&(i.closest("[data-section]").find("section, .section").removeClass("active").attr("style",""),r.css("padding-top",n.outerHeight(r.find(".title")))),e("[data-section].vertical-nav, [data-section].horizontal-nav").find("section, .section").removeClass("active").attr("style",""),n.small(a)&&r.attr("style",""),r.addClass("active")),n.settings.callback()},resize:function(){var t=e("[data-section]"),n=Foundation.libs.section;t.each(function(){var t=e(this),i=t.find("section.active, .section.active");if(i.length>1)i.not(":first").removeClass("active").attr("style","");else if(1>i.length&&!n.is_vertical(t)&&!n.is_horizontal(t)&&!n.is_accordion(t)){var r=t.find("section, .section").first();r.addClass("active"),n.small(t)?r.attr("style",""):r.css("padding-top",n.outerHeight(r.find(".title")))}n.small(t)?i.attr("style",""):i.css("padding-top",n.outerHeight(i.find(".title"))),n.position_titles(t),n.is_horizontal(t)&&!n.small(t)?n.position_content(t):n.position_content(t,!1)})},is_vertical:function(e){return e.hasClass("vertical-nav")},is_horizontal:function(e){return e.hasClass("horizontal-nav")},is_accordion:function(e){return e.hasClass("accordion")},set_active_from_hash:function(){var n=t.location.hash.substring(1),i=e("[data-section]"),r=this;i.each(function(){var t=e(this);e.extend(!0,r.settings,r.data_options(t)),n.length>0&&r.settings.deep_linking&&t.find('.content[data-slug="'+n+'"]').closest("section, .section").addClass("active")})},position_titles:function(t,n){var i=t.find(".title"),r=0,o=this;"boolean"==typeof n?i.attr("style",""):i.each(function(){e(this).css("left",r),r+=o.outerWidth(e(this))})},position_content:function(t,n){var i=t.find(".title"),r=t.find(".content"),o=this;"boolean"==typeof n?(r.attr("style",""),t.attr("style","")):(t.find("section, .section").each(function(){var t=e(this).find(".title"),n=e(this).find(".content");n.css({left:t.position().left-1,top:o.outerHeight(t)-2})}),"function"==typeof Zepto?t.height(this.outerHeight(i.first())):t.height(this.outerHeight(i.first())-2))},small:function(t){return t&&this.is_accordion(t)?!0:e("html").hasClass("lt-ie9")?!0:e("html").hasClass("ie8compat")?!0:768>e(this.scope).width()},off:function(){e(this.scope).off(".fndtn.section"),e(t).off(".fndtn.section"),this.settings.init=!1}}})(Foundation.zj,this,this.document);