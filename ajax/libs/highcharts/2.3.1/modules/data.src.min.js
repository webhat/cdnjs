(function(e){var t=e.each,n=function(e){this.init(e)};e.extend(n.prototype,{init:function(e){this.options=e,this.columns=[],this.parseCSV(),this.parseTable(),this.parseTypes(),this.findHeaderRow(),this.parsed(),this.complete()},parseCSV:function(){var e,n=this.options,i=n.csv,r=this.columns,o=n.startRow||0,a=n.endRow||Number.MAX_VALUE,s=n.startColumn||0,l=n.endColumn||Number.MAX_VALUE;i&&(e=i.split(n.lineDelimiter||"\n"),t(e,function(e,i){if(i>=o&&a>=i){var c=e.split(n.itemDelimiter||",");t(c,function(e,t){t>=s&&l>=t&&(r[t-s]||(r[t-s]=[]),r[t-s][i-o]=e)})}}))},parseTable:function(){var e,n=this.options,i=n.table,r=this.columns,o=n.startRow||0,a=n.endRow||Number.MAX_VALUE,s=n.startColumn||0,l=n.endColumn||Number.MAX_VALUE;i&&("string"==typeof i&&(i=document.getElementById(i)),t(i.getElementsByTagName("tr"),function(n,i){e=0,i>=o&&a>=i&&t(n.childNodes,function(t){("TD"===t.tagName||"TH"===t.tagName)&&e>=s&&l>=e&&(r[e]||(r[e]=[]),r[e][i-o]=t.innerHTML,e+=1)})}))},findHeaderRow:function(){var e=0;t(this.columns,function(t){"string"!=typeof t[0]&&(e=null)}),this.headerRow=0},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},parseTypes:function(){for(var e,t,n,i,r,o=this.columns,a=o.length;a--;)for(e=o[a].length;e--;)t=o[a][e],n=parseFloat(t),i=this.trim(t),i==n?(o[a][e]=n,n>31536e6?o[a].isDatetime=!0:o[a].isNumeric=!0):(r=Date.parse(t),0!==a||"number"!=typeof r||isNaN(r)?o[a][e]=i:(o[a][e]=r,o[a].isDatetime=!0))},parsed:function(){this.options.parsed&&this.options.parsed.call(this,this.columns)},complete:function(){var e,t,n,i,r,o,a,s,l,c=this.columns,u=this.options;if(u.complete){for(c.length>1&&(n=c.shift(),0===this.headerRow&&n.shift(),e=n.isNumeric||n.isDatetime,e||(t=n),n.isDatetime&&(i="datetime")),r=[],s=0;c.length>s;s++){for(0===this.headerRow&&(a=c[s].shift()),o=[],l=0;c[s].length>l;l++)o[l]=void 0!==c[s][l]?e?[n[l],c[s][l]]:c[s][l]:null;r[s]={name:a,data:o}}u.complete({xAxis:{categories:t,type:i},series:r})}}}),e.Data=n,e.data=function(e){return new n(e)}})(Highcharts);