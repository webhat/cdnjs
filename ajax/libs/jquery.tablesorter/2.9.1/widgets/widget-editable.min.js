(function(t){"use strict";t.tablesorter.addWidget({id:"editable",options:{editable_columns:[],editable_enterToAccept:!0,editable_autoResort:!1,editable_noEdit:"no-edit"},init:function(e,n,r,a){if(a.editable_columns.length){var o=[];t.each(a.editable_columns,function(t,e){o.push("td:nth-child("+(e+1)+")")}),r.$tbodies.find(o.join(",")).not("."+a.editable_noEdit).prop("contenteditable",!0),r.$tbodies.on("mouseleave.tseditable",function(){r.$table.data("contentFocused")&&t(":focus").trigger("blur")}).on("focus.tseditable","[contenteditable]",function(){r.$table.data("contentFocused",!0);var e=t(this),n=e.html();a.editable_enterToAccept&&e.on("keydown.tseditable",function(t){13===t.which&&t.preventDefault()}),e.data({before:n,original:n})}).on("blur focusout keyup ".split(" ").join(".tseditable "),"[contenteditable]",function(e){if(r.$table.data("contentFocused")){var n,o=t(e.target);if(27===e.which)return o.html(o.data("original")).trigger("blur.tseditable"),r.$table.data("contentFocused",!1),!1;n="keyup"!==e.type||a.editable_enterToAccept&&13===e.which,(o.data("before")!==o.html()||n)&&(o.data("before",o.html()).trigger("change"),n&&(r.$table.data("contentFocused",!1).trigger("updateCell",[o,a.editable_autoResort]),o.trigger("blur.tseditable")))}})}}})})(jQuery);