(function(t){"use strict";t.tablesorter.addWidget({id:"group",options:{group_collapsible:!0,group_count:" ({num})",group_months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],group_week:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],group_time:["AM","PM"],group_formatter:null},init:function(e,n,r,a){a.group_collapsible&&r.$table.on("click","tr.group-header",function(){t(this).toggleClass("collapsed"),t(this).nextUntil("tr.group-header").toggleClass("group-hidden",t(this).hasClass("collapsed"))})},format:function(e,n,r){var a,o,i,s,l,u,c,d="",p=n.sortList[0]?n.sortList[0][0]:-1,h={number:function(t,e,r){if(r>1&&""!==e)return t.hasClass(n.cssAsc)?(l=Math.floor(parseFloat(e)/r)*r,l>parseFloat(d||0)?l:parseFloat(d||0)):(l=Math.ceil(parseFloat(e)/r)*r,parseFloat(d||r)-l>l?parseFloat(d||r)-l:l);var a=(e+"").match(/\d+/g);return a&&a.length>=r?a[r-1]:e||""},word:function(t,e,n){var r=(e+" ").match(/\w+/g);return r&&r.length>=n?r[n-1]:e||""},letter:function(t,e,n){return e?(e+" ").substring(0,n):""},date:function(t,e,n){return l=new Date(e||""),u=l.getHours(),"year"===n?l.getFullYear():"month"===n?r.group_months[l.getMonth()]:"day"===n?r.group_months[l.getMonth()]+" "+l.getDate():"week"===n?r.group_week[l.getDay()]:"time"===n?("00"+(u>12?u-12:0===u?u+12:u)).slice(-2)+":"+("00"+l.getMinutes()).slice(-2)+" "+("00"+r.group_time[u>=12?1:0]).slice(-2):""+l}};if(n.$table.find("tr.group-hidden").removeClass("group-hidden").end().find("tr.group-header").remove(),p>=0){for(n.debug&&(c=new Date),o=0;n.$tbodies.length>o;o++)for(s=n.$tbodies.children("tr"),a=0;s.length>a;a++)l=(n.$headers.eq(p).attr("class")||"").match(/(group-\w+(-\w+)?)/g),u=l?l[0].split("-"):["","letter",1],i=h[u[1]](n.$headers.eq(p),n.cache[o].normalized[a][p],/date/.test(l)?u[2]:parseInt(u[2]||1,10)||1),d!==i&&(d=i,"number"===u[1]&&u[2]>1&&""!==i&&(i+=" - "+(parseInt(i,10)+(parseInt(u[2],10)-1)*(n.$headers.eq(p).hasClass(n.cssAsc)?1:-1))),t.isFunction(r.group_formatter)&&(i=r.group_formatter(""+(i||""),p,e,n,r)||i),s.eq(a).before('<tr class="group-header '+n.selectorRemove.slice(1)+'"><td colspan="'+(n.columns+1)+'">'+(r.group_collapsible?"<i/>":"")+'<span class="group-name">'+i+'</span><span class="group-count"></span></td></tr>'));r.group_count&&n.$table.find("tr.group-header").each(function(){t(this).find(".group-count").html(r.group_count.replace(/\{num\}/g,t(this).nextUntil("tr.group-header").length))}),n.debug&&t.tablesorter.benchmark("Applying groups widget: ",c)}},remove:function(t,e){e.$table.off("click","tr.group-header").find(".group-hidden").removeClass("group-hidden").end().find("tr.group-header").remove()}})})(jQuery);