(function(t){"use strict";t.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()},t.tablesorter.window_resize=function(){this.resize_timer&&clearTimeout(this.resize_timer),this.resize_timer=setTimeout(function(){t(this).trigger("resizeEnd")},250)},t(function(){var e="<style>.tablesorter-scroller-header table.tablesorter { margin-bottom: 0; }.tablesorter-scroller-table table.tablesorter { margin-top: 0; } .tablesorter-scroller-table .tablesorter-filter-row, .tablesorter-scroller-table tfoot { display: none; }.tablesorter-scroller-table table.tablesorter thead tr.tablesorter-headerRow * {line-height:0;height:0;border:none;background-image:none;padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;overflow:hidden;}</style>";t(e).appendTo("body")}),t.tablesorter.addWidget({id:"scroller",priority:60,options:{scroller_height:300,scroller_barWidth:17,scroller_jumpToHeader:!0,scroller_idPrefix:"s_"},init:function(e){var n=t(window);n.bind("resize",t.tablesorter.window_resize).bind("resizeEnd",function(){"function"==typeof e.config.widgetOptions.scroller_resizeWidth&&(n.unbind("resize",t.tablesorter.window_resize),e.config.widgetOptions.scroller_resizeWidth(),n.bind("resize",t.tablesorter.window_resize))})},format:function(e,n,r){var a,o,i,s,l,u,c=t(window),d=n.$table,p=!1,h="input, select";n.isScrolling||(a=r.scroller_height||300,s=d.find("tbody").height(),0!==s&&a>s&&(a=s+10),i=r.scroller_id=r.scroller_idPrefix+Math.floor(101*Math.random()),o=t('<table class="'+d.attr("class")+'" cellpadding=0 cellspacing=0><thead>'+d.find("thead:first").html()+"</thead></table>"),d.wrap('<div id="'+i+'" class="tablesorter-scroller" style="text-align:left;" />').before(o).find(".tablesorter-filter-row").addClass("hideme"),u=o.wrap('<div class="tablesorter-scroller-header" style="width:'+d.width()+';" />').find("."+n.cssHeader).bind("mousedown",function(){return this.onselectstart=function(){return!1},!1}),d.wrap('<div class="tablesorter-scroller-table" style="height:'+a+"px;width:"+d.width()+';overflow-y:scroll;" />').unbind("sortEnd.tsScroller").bind("sortEnd.tsScroller",function(){n.$headers.each(function(e){var r=u.eq(e);r.attr("class",t(this).attr("class")).removeClass(n.cssProcessing),n.cssIcon&&r.find("."+n.cssIcon).attr("class",t(this).find("."+n.cssIcon).attr("class"))})}),n.$headers.find("*")[t.fn.addBack?"addBack":"andSelf"]().filter(n.selectorSort).each(function(e){var n=t(this);u.eq(e).bind("mouseup",function(t){n.trigger(t,!0)}).bind("mousedown",function(){return this.onselectstart=function(){return!1},!1})}),d.bind("filterEnd",function(){p||u.each(function(e){t(this).find(h).val(n.$filters.find(h).eq(e).val())})}),o.find(h).bind("keyup search",function(e){if(!(32>e.which&&8!==e.which||e.which>=37&&40>=e.which)){p=!0;var a=t(this),o=a.attr("data-column");n.$filters.find(h).eq(o).val(a.val()).trigger("search"),setTimeout(function(){p=!1},r.filter_searchDelay)}}),l=function(){var e,n=t('div.scroller[id != "'+i+'"]').hide();d.find("thead").show(),o.width(0).parent().width(0).find("th,td").width(0),d.width(0).find("thead").find("th,td").width(0),e=d.parent(),e.width(0),e.parent().trigger("resize"),e.width(e.parent().innerWidth()-(e.parent().hasScrollBar()?r.scroller_barWidth:0)),d.width(e.innerWidth()-(e.hasScrollBar()?r.scroller_barWidth:0)),d.find("thead").find("th,td").filter(":visible").each(function(e,n){var r=t(n),a=parseInt(r.css("min-width").replace("auto","0").replace(/(px|em)/,""),10);a>r.width()?r.width(a):a=r.width(),o.find("th,td").eq(e).width(a)}),o.width(d.innerWidth()),n.show()},r.scroller_resizeWidth=l,l(),d.find("thead").css("visibility","hidden"),n.isScrolling=!0,s=d.parent().parent().height(),d.parent().bind("scroll",function(){if(r.scroller_jumpToHeader){var e=c.scrollTop()-o.offset().top;0!==t(this).scrollTop()&&s>e&&e>0&&c.scrollTop(o.offset().top)}})),d.parent().animate({scrollTop:0},"fast")},remove:function(){}})})(jQuery);