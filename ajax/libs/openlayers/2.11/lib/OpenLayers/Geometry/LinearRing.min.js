OpenLayers.Geometry.LinearRing=OpenLayers.Class(OpenLayers.Geometry.LineString,{componentTypes:["OpenLayers.Geometry.Point"],initialize:function(){OpenLayers.Geometry.LineString.prototype.initialize.apply(this,arguments)},addComponent:function(e,t){var i=!1,n=this.components.pop();null==t&&e.equals(n)||(i=OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,arguments));var r=this.components[0];return OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[r]),i},removeComponent:function(){var e=this.components&&this.components.length>3;if(e){this.components.pop(),OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments);var t=this.components[0];OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[t])}return e},move:function(e,t){for(var i=0,n=this.components.length;n-1>i;i++)this.components[i].move(e,t)},rotate:function(e,t){for(var i=0,n=this.components.length;n-1>i;++i)this.components[i].rotate(e,t)},resize:function(e,t,i){for(var n=0,r=this.components.length;r-1>n;++n)this.components[n].resize(e,t,i);return this},transform:function(e,t){if(e&&t){for(var i=0,n=this.components.length;n-1>i;i++){var r=this.components[i];r.transform(e,t)}this.bounds=null}return this},getCentroid:function(){if(this.components&&this.components.length>2){for(var e=0,t=0,i=0;this.components.length-1>i;i++){var n=this.components[i],r=this.components[i+1];e+=(n.x+r.x)*(n.x*r.y-r.x*n.y),t+=(n.y+r.y)*(n.x*r.y-r.x*n.y)}var o=-1*this.getArea(),s=e/(6*o),a=t/(6*o);return new OpenLayers.Geometry.Point(s,a)}return null},getArea:function(){var e=0;if(this.components&&this.components.length>2){for(var t=0,i=0,n=this.components.length;n-1>i;i++){var r=this.components[i],o=this.components[i+1];t+=(r.x+o.x)*(o.y-r.y)}e=-t/2}return e},getGeodesicArea:function(e){var t=this;if(e){var i=new OpenLayers.Projection("EPSG:4326");i.equals(e)||(t=this.clone().transform(e,i))}var n=0,r=t.components&&t.components.length;if(r>2){for(var o,s,a=0;r-1>a;a++)o=t.components[a],s=t.components[a+1],n+=OpenLayers.Util.rad(s.x-o.x)*(2+Math.sin(OpenLayers.Util.rad(o.y))+Math.sin(OpenLayers.Util.rad(s.y)));n=6378137*6378137*n/2}return n},containsPoint:function(e){function t(e,t,i,n,r){return((t-n)*e+(n*i-t*r))/(i-r)}for(var i,n,r,o,s,a,l,c=OpenLayers.Number.limitSigDigs,u=14,h=c(e.x,u),d=c(e.y,u),p=this.components.length-1,f=0,m=0;p>m;++m)if(i=this.components[m],r=c(i.x,u),o=c(i.y,u),n=this.components[m+1],s=c(n.x,u),a=c(n.y,u),o!=a){if(l=c(t(d,r,o,s,a),u),l==h&&(a>o&&d>=o&&a>=d||o>a&&o>=d&&d>=a)){f=-1;break}h>=l||r!=s&&(Math.min(r,s)>l||l>Math.max(r,s))||(a>o&&d>=o&&a>d||o>a&&o>d&&d>=a)&&++f}else if(d==o&&(s>=r&&h>=r&&s>=h||r>=s&&r>=h&&h>=s)){f=-1;break}var g=-1==f?1:!!(1&f);return g},intersects:function(e){var t=!1;if("OpenLayers.Geometry.Point"==e.CLASS_NAME)t=this.containsPoint(e);else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME)t=e.intersects(this);else if("OpenLayers.Geometry.LinearRing"==e.CLASS_NAME)t=OpenLayers.Geometry.LineString.prototype.intersects.apply(this,[e]);else for(var i=0,n=e.components.length;n>i&&!(t=e.components[i].intersects(this));++i);return t},getVertices:function(e){return e===!0?[]:this.components.slice(0,this.components.length-1)},CLASS_NAME:"OpenLayers.Geometry.LinearRing"});