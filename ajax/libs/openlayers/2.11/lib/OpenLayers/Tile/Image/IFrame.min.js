OpenLayers.Tile.Image.IFrame={useIFrame:null,clear:function(){if(this.useIFrame){if(this.imgDiv){var e=this.imgDiv.firstChild;OpenLayers.Event.stopObservingElement(e),this.imgDiv.removeChild(e),delete e}}else OpenLayers.Tile.Image.prototype.clear.apply(this,arguments)},renderTile:function(){if(OpenLayers.Tile.Image.prototype.renderTile.apply(this,arguments)&&this.useIFrame){var e=this.createRequestForm();this.imgDiv.appendChild(e),e.submit(),this.imgDiv.removeChild(e),delete e}return!0},initImgDiv:function(){if(this.useIFrame=null!==this.maxGetUrlLength&&!this.layer.async&&this.url.length>this.maxGetUrlLength,null!=this.imgDiv){var e=this.imgDiv.nodeName.toLowerCase();(this.useIFrame&&"img"==e||!this.useIFrame&&"div"==e)&&(this.removeImgDiv(),this.imgDiv=null)}if(this.useIFrame){if(null==this.imgDiv){var t=document.createElement("div");"msie"==OpenLayers.BROWSER_NAME&&(t.style.backgroundColor="#FFFFFF",t.style.filter="chroma(color=#FFFFFF)"),OpenLayers.Util.modifyDOMElement(t,null,new OpenLayers.Pixel(0,0),this.layer.getImageSize(),"absolute"),this.imgDiv=document.createElement("div"),this.imgDiv.appendChild(t),OpenLayers.Util.modifyDOMElement(this.imgDiv,this.id,null,this.layer.getImageSize(),"relative"),this.imgDiv.className="olTileImage",this.frame.appendChild(this.imgDiv),this.layer.div.appendChild(this.frame),null!=this.layer.opacity&&OpenLayers.Util.modifyDOMElement(this.imgDiv,null,null,null,null,null,null,this.layer.opacity),this.imgDiv.map=this.layer.map}this.imgDiv.viewRequestID=this.layer.map.viewRequestID}else OpenLayers.Tile.Image.prototype.initImgDiv.apply(this,arguments)},createIFrame:function(){var e,t=this.id+"_iFrame";"msie"==OpenLayers.BROWSER_NAME?(e=document.createElement('<iframe name="'+t+'">'),e.style.backgroundColor="#FFFFFF",e.style.filter="chroma(color=#FFFFFF)"):(e=document.createElement("iframe"),e.style.backgroundColor="transparent",e.name=t),e.id=t,e.scrolling="no",e.marginWidth="0px",e.marginHeight="0px",e.frameBorder="0",OpenLayers.Util.modifyDOMElement(e,t,new OpenLayers.Pixel(0,0),this.layer.getImageSize(),"absolute");var i=function(){this.isLoading&&(this.isLoading=!1,this.events.triggerEvent("loadend"))};return OpenLayers.Event.observe(e,"load",OpenLayers.Function.bind(i,this)),e},createRequestForm:function(){var e=document.createElement("form");e.method="POST";var t=this.layer.params._OLSALT;t=(t?t+"_":"")+this.bounds.toBBOX(),e.action=OpenLayers.Util.urlAppend(this.layer.url,t),this.imgDiv.insertBefore(this.createIFrame(),this.imgDiv.firstChild),e.target=this.id+"_iFrame",this.layer.getImageSize();var i=OpenLayers.Util.getParameters(this.url);for(var n in i){var r=document.createElement("input");r.type="hidden",r.name=n,r.value=i[n],e.appendChild(r)}return e}};